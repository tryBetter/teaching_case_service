<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>教学案例服务后台管理系统</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
      rel="stylesheet"
    />
    <style>
      .sidebar {
        min-height: 100vh;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .sidebar .nav-link {
        color: rgba(255, 255, 255, 0.8);
        transition: all 0.3s;
      }
      .sidebar .nav-link:hover,
      .sidebar .nav-link.active {
        color: white;
        background-color: rgba(255, 255, 255, 0.1);
      }
      .main-content {
        background-color: #f8f9fa;
        min-height: 100vh;
      }
      .card {
        border: none;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        transition: all 0.3s;
      }
      .card:hover {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
      }
      .stat-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }
      .stat-card .card-body {
        padding: 1.5rem;
      }
      .stat-number {
        font-size: 2rem;
        font-weight: bold;
      }
      .table {
        background: white;
      }
      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
      }
      .btn-primary:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%);
      }
      .navbar {
        background: white;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
      }
      .loading {
        display: none;
      }
      .error-message {
        display: none;
        color: #dc3545;
      }
      .success-message {
        display: none;
        color: #198754;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <!-- 侧边栏 -->
        <nav
          class="col-md-3 col-lg-2 d-md-block sidebar collapse"
          style="display: none"
        >
          <div class="position-sticky pt-3">
            <div class="text-center mb-4">
              <h4 class="text-white">
                <i class="bi bi-shield-check"></i>
                后台管理
              </h4>
            </div>
            <ul class="nav flex-column">
              <li class="nav-item">
                <a
                  class="nav-link active"
                  href="#"
                  onclick="showSection('dashboard')"
                >
                  <i class="bi bi-speedometer2"></i>
                  仪表盘
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('users')">
                  <i class="bi bi-people"></i>
                  用户管理
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('articles')">
                  <i class="bi bi-file-text"></i>
                  文章管理
                </a>
              </li>
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="#"
                  onclick="showSection('categories')"
                >
                  <i class="bi bi-tags"></i>
                  分类管理
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('media')">
                  <i class="bi bi-image"></i>
                  媒体管理
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('comments')">
                  <i class="bi bi-chat-dots"></i>
                  评论管理
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('notes')">
                  <i class="bi bi-journal-text"></i>
                  笔记管理
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('favorites')">
                  <i class="bi bi-heart"></i>
                  收藏管理
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('roles')">
                  <i class="bi bi-shield-check"></i>
                  角色权限
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('hotSearch')">
                  <i class="bi bi-search"></i>
                  热搜管理
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#" onclick="showSection('stats')">
                  <i class="bi bi-graph-up"></i>
                  统计分析
                </a>
              </li>
              <li class="nav-item mt-3">
                <a class="nav-link" href="#" onclick="logout()">
                  <i class="bi bi-box-arrow-right"></i>
                  退出登录
                </a>
              </li>
            </ul>
          </div>
        </nav>

        <!-- 登录表单 -->
        <div
          id="loginSection"
          class="col-12 d-flex justify-content-center align-items-center"
          style="
            min-height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            background-color: #f8f9fa;
          "
        >
          <div class="col-md-6 col-lg-4">
            <div class="card">
              <div class="card-body">
                <h3 class="card-title text-center mb-4">
                  <i class="bi bi-shield-lock"></i>
                  超级管理员登录
                </h3>
                <form id="loginForm">
                  <div class="mb-3">
                    <label for="email" class="form-label">邮箱地址</label>
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      required
                    />
                  </div>
                  <div class="mb-3">
                    <label for="password" class="form-label">密码</label>
                    <input
                      type="password"
                      class="form-control"
                      id="password"
                      required
                    />
                  </div>
                  <div class="d-grid">
                    <button type="submit" class="btn btn-primary">
                      <i class="bi bi-box-arrow-in-right"></i>
                      登录
                    </button>
                  </div>
                  <div class="error-message mt-3" id="loginError"></div>
                </form>
              </div>
            </div>
          </div>
        </div>

        <!-- 主内容区 -->
        <main
          class="col-md-9 ms-sm-auto col-lg-10 px-md-4 main-content"
          style="display: none"
        >
          <!-- 顶部导航栏 -->
          <nav class="navbar navbar-expand-lg navbar-light bg-white mb-4">
            <div class="container-fluid">
              <span class="navbar-brand mb-0 h1">
                <i class="bi bi-house"></i>
                教学案例服务后台管理系统
              </span>
              <div class="navbar-nav ms-auto">
                <span class="navbar-text">
                  <i class="bi bi-person-circle"></i>
                  <span id="currentUser">超级管理员</span>
                </span>
              </div>
            </div>
          </nav>

          <!-- 仪表盘 -->
          <div
            id="dashboardSection"
            class="content-section"
            style="display: none"
          >
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">仪表盘</h1>
            </div>

            <!-- 统计卡片 -->
            <div class="row mb-4">
              <div class="col-md-3 mb-3">
                <div class="card stat-card">
                  <div class="card-body text-center">
                    <i
                      class="bi bi-people-fill mb-2"
                      style="font-size: 2rem"
                    ></i>
                    <div class="stat-number" id="totalUsers">-</div>
                    <div>总用户数</div>
                  </div>
                </div>
              </div>
              <div class="col-md-3 mb-3">
                <div class="card stat-card">
                  <div class="card-body text-center">
                    <i
                      class="bi bi-file-text-fill mb-2"
                      style="font-size: 2rem"
                    ></i>
                    <div class="stat-number" id="totalArticles">-</div>
                    <div>总文章数</div>
                  </div>
                </div>
              </div>
              <div class="col-md-3 mb-3">
                <div class="card stat-card">
                  <div class="card-body text-center">
                    <i
                      class="bi bi-chat-dots-fill mb-2"
                      style="font-size: 2rem"
                    ></i>
                    <div class="stat-number" id="totalComments">-</div>
                    <div>总评论数</div>
                  </div>
                </div>
              </div>
              <div class="col-md-3 mb-3">
                <div class="card stat-card">
                  <div class="card-body text-center">
                    <i
                      class="bi bi-image-fill mb-2"
                      style="font-size: 2rem"
                    ></i>
                    <div class="stat-number" id="totalMedia">-</div>
                    <div>总媒体数</div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 最近活动 -->
            <div class="row">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5><i class="bi bi-clock-history"></i> 最近用户</h5>
                  </div>
                  <div class="card-body">
                    <div id="recentUsers">
                      <div class="text-center">
                        <div class="spinner-border" role="status">
                          <span class="visually-hidden">加载中...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5><i class="bi bi-file-earmark-plus"></i> 最近文章</h5>
                  </div>
                  <div class="card-body">
                    <div id="recentArticles">
                      <div class="text-center">
                        <div class="spinner-border" role="status">
                          <span class="visually-hidden">加载中...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 用户管理 -->
          <div id="usersSection" class="content-section" style="display: none">
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">用户管理</h1>
              <div class="btn-toolbar mb-2 mb-md-0">
                <div class="btn-group me-2" role="group">
                  <button
                    type="button"
                    class="btn btn-primary"
                    onclick="showCreateUserModal()"
                  >
                    <i class="bi bi-person-plus"></i>
                    添加用户
                  </button>
                  <button
                    type="button"
                    class="btn btn-success"
                    onclick="downloadUserTemplate()"
                  >
                    <i class="bi bi-download"></i>
                    下载模板
                  </button>
                  <button
                    type="button"
                    class="btn btn-info"
                    onclick="showBatchImportModal()"
                  >
                    <i class="bi bi-upload"></i>
                    批量导入
                  </button>
                </div>
              </div>
            </div>

            <div class="card">
              <div class="card-body">
                <!-- 搜索和筛选区域 -->
                <div class="row mb-3">
                  <div class="col-md-6">
                    <div class="input-group">
                      <input
                        type="text"
                        id="userSearchInput"
                        class="form-control"
                        placeholder="搜索用户（姓名或邮箱）"
                      />
                      <button
                        class="btn btn-outline-secondary"
                        type="button"
                        onclick="searchUsers()"
                      >
                        <i class="bi bi-search"></i>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-3">
                    <select
                      id="userRoleFilter"
                      class="form-select"
                      onchange="filterUsers()"
                    >
                      <option value="">所有角色</option>
                      <!-- 角色选项将通过JavaScript动态加载 -->
                    </select>
                  </div>
                  <div class="col-md-3">
                    <select
                      id="userPageSize"
                      class="form-select"
                      onchange="changePageSize()"
                    >
                      <option value="10">每页10条</option>
                      <option value="20">每页20条</option>
                      <option value="50">每页50条</option>
                    </select>
                  </div>
                </div>

                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>姓名</th>
                        <th>邮箱</th>
                        <th>角色</th>
                        <th>状态</th>
                        <th>创建时间</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="usersTableBody">
                      <tr>
                        <td colspan="7" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- 分页组件 -->
                <nav aria-label="用户列表分页">
                  <ul
                    id="usersPagination"
                    class="pagination justify-content-center"
                  >
                    <!-- 分页按钮将通过JavaScript动态生成 -->
                  </ul>
                </nav>

                <!-- 分页信息 -->
                <div class="d-flex justify-content-between align-items-center">
                  <div id="usersPaginationInfo" class="text-muted">
                    <!-- 分页信息将通过JavaScript动态生成 -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 文章管理 -->
          <div
            id="articlesSection"
            class="content-section"
            style="display: none"
          >
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">文章管理</h1>
            </div>

            <div class="card">
              <div class="card-body">
                <!-- 状态筛选按钮组 -->
                <div class="mb-3">
                  <div class="btn-group" role="group" aria-label="文章状态筛选">
                    <input
                      type="radio"
                      class="btn-check"
                      name="articleDeleteFilter"
                      id="normalArticles"
                      value="normal"
                      checked
                      autocomplete="off"
                      onchange="changeDeleteFilter()"
                    />
                    <label class="btn btn-outline-primary" for="normalArticles">
                      <i class="bi bi-file-text"></i> 正常文章
                    </label>

                    <input
                      type="radio"
                      class="btn-check"
                      name="articleDeleteFilter"
                      id="allArticles"
                      value="all"
                      autocomplete="off"
                      onchange="changeDeleteFilter()"
                    />
                    <label class="btn btn-outline-secondary" for="allArticles">
                      <i class="bi bi-archive"></i> 全部文章
                    </label>

                    <input
                      type="radio"
                      class="btn-check"
                      name="articleDeleteFilter"
                      id="deletedArticles"
                      value="deleted"
                      autocomplete="off"
                      onchange="changeDeleteFilter()"
                    />
                    <label class="btn btn-outline-danger" for="deletedArticles">
                      <i class="bi bi-trash"></i> 回收站
                    </label>
                  </div>
                  <small class="text-muted ms-3" id="filterTip"></small>
                </div>

                <!-- 搜索和筛选区域 -->
                <div class="row mb-3">
                  <div class="col-md-4">
                    <div class="input-group">
                      <input
                        type="text"
                        id="articleSearchInput"
                        class="form-control"
                        placeholder="搜索文章（标题或内容）"
                      />
                      <button
                        class="btn btn-outline-secondary"
                        type="button"
                        onclick="searchArticles()"
                      >
                        <i class="bi bi-search"></i>
                      </button>
                    </div>
                  </div>
                  <div class="col-md-2">
                    <select
                      id="articleStatusFilter"
                      class="form-select"
                      onchange="filterArticles()"
                    >
                      <option value="">所有状态</option>
                      <option value="true">已发布</option>
                      <option value="false">草稿</option>
                    </select>
                  </div>
                  <div class="col-md-2">
                    <select
                      id="articleCategoryFilter"
                      class="form-select"
                      onchange="filterArticles()"
                    >
                      <option value="">所有分类</option>
                      <!-- 分类选项将通过JavaScript动态加载 -->
                    </select>
                  </div>
                  <div class="col-md-2">
                    <select
                      id="articleAuthorFilter"
                      class="form-select"
                      onchange="filterArticles()"
                    >
                      <option value="">所有作者</option>
                      <!-- 作者选项将通过JavaScript动态加载 -->
                    </select>
                  </div>
                  <div class="col-md-2">
                    <select
                      id="articlePageSize"
                      class="form-select"
                      onchange="changeArticlePageSize()"
                    >
                      <option value="10">每页10条</option>
                      <option value="20">每页20条</option>
                      <option value="50">每页50条</option>
                    </select>
                  </div>
                </div>

                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th style="width: 60px">ID</th>
                        <th>标题</th>
                        <th style="width: 100px">作者</th>
                        <th style="width: 100px">分类</th>
                        <th style="width: 120px">状态</th>
                        <th style="width: 160px" id="timeColumnHeader">
                          创建时间
                        </th>
                        <th style="width: 180px">操作</th>
                      </tr>
                    </thead>
                    <tbody id="articlesTableBody">
                      <tr>
                        <td colspan="7" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- 分页组件 -->
                <nav aria-label="文章列表分页">
                  <ul
                    id="articlesPagination"
                    class="pagination justify-content-center"
                  >
                    <!-- 分页按钮将通过JavaScript动态生成 -->
                  </ul>
                </nav>

                <!-- 分页信息 -->
                <div class="d-flex justify-content-between align-items-center">
                  <div id="articlesPaginationInfo" class="text-muted">
                    <!-- 分页信息将通过JavaScript动态生成 -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 分类管理 -->
          <div
            id="categoriesSection"
            class="content-section"
            style="display: none"
          >
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">分类管理</h1>
              <div class="btn-toolbar mb-2 mb-md-0">
                <button
                  type="button"
                  class="btn btn-primary"
                  onclick="showCreateCategoryModal()"
                >
                  <i class="bi bi-plus-circle"></i>
                  添加分类
                </button>
              </div>
            </div>

            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>名称</th>
                        <th>描述</th>
                        <th>文章数</th>
                        <th>创建时间</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="categoriesTableBody">
                      <tr>
                        <td colspan="6" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- 媒体管理 -->
          <div id="mediaSection" class="content-section" style="display: none">
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">媒体管理</h1>
            </div>

            <!-- 搜索和筛选 -->
            <div class="row mb-3">
              <div class="col-md-6">
                <div class="input-group">
                  <span class="input-group-text">
                    <i class="bi bi-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control"
                    id="mediaSearchInput"
                    placeholder="搜索文件名..."
                    onkeyup="searchMedia()"
                  />
                </div>
              </div>
              <div class="col-md-3">
                <select
                  class="form-select"
                  id="mediaTypeFilter"
                  onchange="filterMedia()"
                >
                  <option value="">所有类型</option>
                  <option value="IMAGE">图片</option>
                  <option value="VIDEO">视频</option>
                </select>
              </div>
              <div class="col-md-3">
                <select
                  class="form-select"
                  id="mediaPageSize"
                  onchange="changeMediaPageSize()"
                >
                  <option value="10">每页10条</option>
                  <option value="20">每页20条</option>
                  <option value="50">每页50条</option>
                  <option value="100">每页100条</option>
                </select>
              </div>
            </div>

            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>文件名</th>
                        <th>类型</th>
                        <th>大小</th>
                        <th>上传者</th>
                        <th>创建时间</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="mediaTableBody">
                      <tr>
                        <td colspan="7" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- 分页组件 -->
                <div
                  class="d-flex justify-content-between align-items-center mt-3"
                >
                  <div id="mediaPaginationInfo" class="text-muted">
                    显示第 1-10 条，共 0 条
                  </div>
                  <nav>
                    <ul id="mediaPagination" class="pagination mb-0">
                      <!-- 分页按钮将通过JavaScript动态生成 -->
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>

          <!-- 评论管理 -->
          <div
            id="commentsSection"
            class="content-section"
            style="display: none"
          >
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">评论管理</h1>
            </div>

            <!-- 搜索和筛选 -->
            <div class="row mb-3">
              <div class="col-md-6">
                <div class="input-group">
                  <span class="input-group-text">
                    <i class="bi bi-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control"
                    id="commentsSearchInput"
                    placeholder="搜索评论内容..."
                    onkeyup="searchComments()"
                  />
                </div>
              </div>
              <div class="col-md-3">
                <select
                  class="form-select"
                  id="commentsPageSize"
                  onchange="changeCommentsPageSize()"
                >
                  <option value="10">每页10条</option>
                  <option value="20">每页20条</option>
                  <option value="50">每页50条</option>
                  <option value="100">每页100条</option>
                </select>
              </div>
              <div class="col-md-3">
                <button
                  class="btn btn-outline-secondary"
                  onclick="resetCommentsFilter()"
                >
                  <i class="bi bi-arrow-clockwise"></i>
                  重置筛选
                </button>
              </div>
            </div>

            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>内容</th>
                        <th>作者</th>
                        <th>文章</th>
                        <th>创建时间</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="commentsTableBody">
                      <tr>
                        <td colspan="6" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- 分页组件 -->
                <div
                  class="d-flex justify-content-between align-items-center mt-3"
                >
                  <div id="commentsPaginationInfo" class="text-muted">
                    显示第 1-10 条，共 0 条
                  </div>
                  <nav>
                    <ul id="commentsPagination" class="pagination mb-0">
                      <!-- 分页按钮将通过JavaScript动态生成 -->
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>

          <!-- 笔记管理 -->
          <div id="notesSection" class="content-section" style="display: none">
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">笔记管理</h1>
            </div>

            <!-- 搜索和筛选 -->
            <div class="row mb-3">
              <div class="col-md-6">
                <div class="input-group">
                  <span class="input-group-text">
                    <i class="bi bi-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control"
                    id="notesSearchInput"
                    placeholder="搜索笔记内容..."
                    onkeyup="searchNotes()"
                  />
                </div>
              </div>
              <div class="col-md-3">
                <select
                  class="form-select"
                  id="notesPageSize"
                  onchange="changeNotesPageSize()"
                >
                  <option value="10">每页10条</option>
                  <option value="20">每页20条</option>
                  <option value="50">每页50条</option>
                  <option value="100">每页100条</option>
                </select>
              </div>
              <div class="col-md-3">
                <button
                  class="btn btn-outline-secondary"
                  onclick="resetNotesFilter()"
                >
                  <i class="bi bi-arrow-clockwise"></i>
                  重置筛选
                </button>
              </div>
            </div>

            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>内容</th>
                        <th>用户</th>
                        <th>文章</th>
                        <th>创建时间</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="notesTableBody">
                      <tr>
                        <td colspan="6" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>

                <!-- 分页组件 -->
                <div
                  class="d-flex justify-content-between align-items-center mt-3"
                >
                  <div id="notesPaginationInfo" class="text-muted">
                    显示第 1-10 条，共 0 条
                  </div>
                  <nav>
                    <ul id="notesPagination" class="pagination mb-0">
                      <!-- 分页按钮将通过JavaScript动态生成 -->
                    </ul>
                  </nav>
                </div>
              </div>
            </div>
          </div>

          <!-- 收藏管理 -->
          <div
            id="favoritesSection"
            class="content-section"
            style="display: none"
          >
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">收藏管理</h1>
            </div>

            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>用户</th>
                        <th>文章</th>
                        <th>收藏时间</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="favoritesTableBody">
                      <tr>
                        <td colspan="5" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- 角色权限管理 -->
          <div id="rolesSection" class="content-section" style="display: none">
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">角色权限管理</h1>
            </div>

            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>角色名称</th>
                        <th>描述</th>
                        <th>用户数</th>
                        <th>权限数</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="rolesTableBody">
                      <tr>
                        <td colspan="6" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- 热搜管理 -->
          <div
            id="hotSearchSection"
            class="content-section"
            style="display: none"
          >
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">热搜词条管理</h1>
              <button
                class="btn btn-primary"
                onclick="showCreateHotSearchModal()"
              >
                <i class="bi bi-plus-circle"></i>
                添加热搜词条
              </button>
            </div>

            <!-- 搜索和筛选 -->
            <div class="row mb-3">
              <div class="col-md-6">
                <div class="input-group">
                  <span class="input-group-text">
                    <i class="bi bi-search"></i>
                  </span>
                  <input
                    type="text"
                    class="form-control"
                    id="hotSearchKeyword"
                    placeholder="搜索关键词..."
                    onkeyup="filterHotSearch()"
                  />
                </div>
              </div>
              <div class="col-md-3">
                <select
                  class="form-select"
                  id="hotSearchStatus"
                  onchange="filterHotSearch()"
                >
                  <option value="">全部状态</option>
                  <option value="true">启用</option>
                  <option value="false">禁用</option>
                </select>
              </div>
              <div class="col-md-3">
                <button
                  class="btn btn-outline-secondary"
                  onclick="resetHotSearchFilter()"
                >
                  <i class="bi bi-arrow-clockwise"></i>
                  重置筛选
                </button>
              </div>
            </div>

            <!-- 热搜词条列表 -->
            <div class="card">
              <div class="card-body">
                <div class="table-responsive">
                  <table class="table table-hover">
                    <thead>
                      <tr>
                        <th>ID</th>
                        <th>关键词</th>
                        <th>描述</th>
                        <th>排序权重</th>
                        <th>点击次数</th>
                        <th>状态</th>
                        <th>创建时间</th>
                        <th>操作</th>
                      </tr>
                    </thead>
                    <tbody id="hotSearchTableBody">
                      <tr>
                        <td colspan="8" class="text-center">
                          <div class="spinner-border" role="status">
                            <span class="visually-hidden">加载中...</span>
                          </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>

          <!-- 统计分析 -->
          <div id="statsSection" class="content-section" style="display: none">
            <div
              class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
            >
              <h1 class="h2">统计分析</h1>
            </div>

            <div class="row">
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5><i class="bi bi-people"></i> 用户统计</h5>
                  </div>
                  <div class="card-body">
                    <div id="userStats">
                      <div class="text-center">
                        <div class="spinner-border" role="status">
                          <span class="visually-hidden">加载中...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card">
                  <div class="card-header">
                    <h5><i class="bi bi-file-text"></i> 内容统计</h5>
                  </div>
                  <div class="card-body">
                    <div id="contentStats">
                      <div class="text-center">
                        <div class="spinner-border" role="status">
                          <span class="visually-hidden">加载中...</span>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <!-- 添加用户模态框 -->
    <div
      class="modal fade"
      id="createUserModal"
      tabindex="-1"
      aria-labelledby="createUserModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="createUserModalLabel">添加用户</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="createUserForm">
              <div class="mb-3">
                <label for="createUserEmail" class="form-label"
                  >邮箱 <span class="text-danger">*</span></label
                >
                <input
                  type="email"
                  class="form-control"
                  id="createUserEmail"
                  required
                />
                <div class="invalid-feedback"></div>
              </div>
              <div class="mb-3">
                <label for="createUserName" class="form-label">姓名</label>
                <input type="text" class="form-control" id="createUserName" />
                <div class="invalid-feedback"></div>
              </div>
              <div class="mb-3">
                <label for="createUserPassword" class="form-label"
                  >密码 <span class="text-danger">*</span></label
                >
                <input
                  type="password"
                  class="form-control"
                  id="createUserPassword"
                  required
                />
                <div class="invalid-feedback"></div>
              </div>
              <div class="mb-3">
                <label for="createUserRole" class="form-label"
                  >角色 <span class="text-danger">*</span></label
                >
                <select class="form-select" id="createUserRole" required>
                  <option value="">请选择角色</option>
                  <!-- 角色选项将通过JavaScript动态加载 -->
                </select>
                <div class="invalid-feedback"></div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              取消
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="submitCreateUser()"
            >
              创建用户
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 编辑用户模态框 -->
    <div
      class="modal fade"
      id="editUserModal"
      tabindex="-1"
      aria-labelledby="editUserModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editUserModalLabel">编辑用户</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editUserForm">
              <input type="hidden" id="editUserId" />
              <div class="mb-3">
                <label for="editUserEmail" class="form-label"
                  >邮箱 <span class="text-danger">*</span></label
                >
                <input
                  type="email"
                  class="form-control"
                  id="editUserEmail"
                  required
                />
                <div class="invalid-feedback"></div>
              </div>
              <div class="mb-3">
                <label for="editUserName" class="form-label">姓名</label>
                <input type="text" class="form-control" id="editUserName" />
                <div class="invalid-feedback"></div>
              </div>
              <div class="mb-3">
                <label for="editUserPassword" class="form-label">密码</label>
                <input
                  type="password"
                  class="form-control"
                  id="editUserPassword"
                  placeholder="留空表示不修改密码"
                />
                <div class="invalid-feedback"></div>
              </div>
              <div class="mb-3">
                <label for="editUserRole" class="form-label"
                  >角色 <span class="text-danger">*</span></label
                >
                <select class="form-select" id="editUserRole" required>
                  <option value="">请选择角色</option>
                  <!-- 角色选项将通过JavaScript动态加载 -->
                </select>
                <div class="invalid-feedback"></div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              取消
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="submitEditUser()"
            >
              更新用户
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 查看媒体模态框 -->
    <div
      class="modal fade"
      id="viewMediaModal"
      tabindex="-1"
      aria-labelledby="viewMediaModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="viewMediaModalLabel">查看媒体文件</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <!-- 媒体预览区域 -->
            <div class="text-center mb-4" id="mediaPreview">
              <div class="spinner-border" role="status">
                <span class="visually-hidden">加载中...</span>
              </div>
            </div>

            <!-- 媒体信息 -->
            <div class="row">
              <div class="col-md-6">
                <table class="table table-sm">
                  <tr>
                    <th style="width: 100px">ID:</th>
                    <td id="mediaDetailId">-</td>
                  </tr>
                  <tr>
                    <th>文件名:</th>
                    <td id="mediaDetailName">-</td>
                  </tr>
                  <tr>
                    <th>类型:</th>
                    <td id="mediaDetailType">-</td>
                  </tr>
                  <tr>
                    <th>大小:</th>
                    <td id="mediaDetailSize">-</td>
                  </tr>
                  <tr>
                    <th>上传者:</th>
                    <td id="mediaDetailUploader">-</td>
                  </tr>
                </table>
              </div>
              <div class="col-md-6">
                <table class="table table-sm">
                  <tr>
                    <th style="width: 100px">创建时间:</th>
                    <td id="mediaDetailCreatedAt">-</td>
                  </tr>
                  <tr>
                    <th>URL:</th>
                    <td>
                      <a
                        id="mediaDetailUrl"
                        href="#"
                        target="_blank"
                        class="text-break"
                        >-</a
                      >
                    </td>
                  </tr>
                  <tr>
                    <th>关联文章:</th>
                    <td id="mediaDetailArticles">-</td>
                  </tr>
                </table>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              关闭
            </button>
            <a
              id="mediaDownloadBtn"
              href="#"
              class="btn btn-primary"
              download
              target="_blank"
            >
              <i class="bi bi-download"></i>
              下载文件
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- 编辑文章模态框 -->
    <div
      class="modal fade"
      id="editArticleModal"
      tabindex="-1"
      aria-labelledby="editArticleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editArticleModalLabel">编辑文章</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editArticleForm">
              <input type="hidden" id="editArticleId" />

              <div class="mb-3">
                <label for="editArticleTitle" class="form-label">标题 *</label>
                <input
                  type="text"
                  class="form-control"
                  id="editArticleTitle"
                  required
                />
              </div>

              <div class="mb-3">
                <label for="editArticleSummary" class="form-label">摘要</label>
                <textarea
                  class="form-control"
                  id="editArticleSummary"
                  rows="2"
                ></textarea>
              </div>

              <div class="mb-3">
                <label for="editArticleContent" class="form-label">内容</label>
                <textarea
                  class="form-control"
                  id="editArticleContent"
                  rows="6"
                ></textarea>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="editArticleCategoryId" class="form-label"
                      >分类 *</label
                    >
                    <select
                      class="form-select"
                      id="editArticleCategoryId"
                      required
                    >
                      <option value="">请选择分类</option>
                    </select>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="editArticleCover" class="form-label"
                      >封面图片URL</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      id="editArticleCover"
                      placeholder="https://..."
                    />
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="editArticleKeywords" class="form-label"
                  >关键词</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="editArticleKeywords"
                  placeholder="用逗号分隔，例如：教学,案例,研究"
                />
                <div class="form-text">多个关键词请用逗号分隔</div>
              </div>

              <div class="row">
                <div class="col-md-6">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="editArticlePublished"
                    />
                    <label class="form-check-label" for="editArticlePublished">
                      发布文章
                    </label>
                  </div>
                </div>

                <div class="col-md-6">
                  <div class="form-check">
                    <input
                      class="form-check-input"
                      type="checkbox"
                      id="editArticleFeatured"
                    />
                    <label class="form-check-label" for="editArticleFeatured">
                      设为推荐
                    </label>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              取消
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="updateArticle()"
            >
              <i class="bi bi-check-circle"></i>
              保存修改
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 批量导入用户模态框 -->
    <div
      class="modal fade"
      id="batchImportModal"
      tabindex="-1"
      aria-labelledby="batchImportModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="batchImportModalLabel">批量导入用户</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-md-6">
                <h6>步骤说明：</h6>
                <ol>
                  <li>点击"下载模板"按钮下载Excel模板</li>
                  <li>在模板中填写用户信息</li>
                  <li>选择填写好的Excel文件</li>
                  <li>点击"开始导入"按钮</li>
                </ol>
                <div class="mt-3">
                  <button
                    type="button"
                    class="btn btn-success"
                    onclick="downloadUserTemplate()"
                  >
                    <i class="bi bi-download"></i>
                    下载模板
                  </button>
                </div>
              </div>
              <div class="col-md-6">
                <h6>文件上传：</h6>
                <div class="mb-3">
                  <label for="userExcelFile" class="form-label"
                    >选择Excel文件</label
                  >
                  <input
                    type="file"
                    class="form-control"
                    id="userExcelFile"
                    accept=".xlsx,.xls"
                    onchange="handleFileSelect(event)"
                  />
                  <div class="form-text">
                    支持 .xlsx 和 .xls 格式，文件大小不超过10MB
                  </div>
                </div>
                <div
                  id="fileInfo"
                  class="alert alert-info"
                  style="display: none"
                >
                  <i class="bi bi-info-circle"></i>
                  <span id="fileInfoText"></span>
                </div>
              </div>
            </div>

            <!-- 导入结果区域 -->
            <div id="importResult" style="display: none">
              <hr />
              <h6>导入结果：</h6>
              <div id="importResultContent"></div>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              取消
            </button>
            <button
              type="button"
              class="btn btn-primary"
              id="importButton"
              onclick="startBatchImport()"
              disabled
            >
              <i class="bi bi-upload"></i>
              开始导入
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- 管理界面脚本 -->
    <!-- 热搜管理模态框 -->
    <!-- 创建热搜词条模态框 -->
    <div
      class="modal fade"
      id="createHotSearchModal"
      tabindex="-1"
      aria-labelledby="createHotSearchModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="createHotSearchModalLabel">
              添加热搜词条
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="createHotSearchForm">
              <div class="mb-3">
                <label for="createKeyword" class="form-label">关键词 *</label>
                <input
                  type="text"
                  class="form-control"
                  id="createKeyword"
                  required
                  placeholder="请输入热搜关键词"
                />
              </div>
              <div class="mb-3">
                <label for="createDescription" class="form-label">描述</label>
                <textarea
                  class="form-control"
                  id="createDescription"
                  rows="3"
                  placeholder="请输入热搜描述（可选）"
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="createOrder" class="form-label">排序权重</label>
                <input
                  type="number"
                  class="form-control"
                  id="createOrder"
                  value="0"
                  min="0"
                  placeholder="数字越大排序越靠前"
                />
              </div>
              <div class="mb-3">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="createIsActive"
                    checked
                  />
                  <label class="form-check-label" for="createIsActive">
                    启用此热搜词条
                  </label>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              取消
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="createHotSearch()"
            >
              创建
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 编辑热搜词条模态框 -->
    <div
      class="modal fade"
      id="editHotSearchModal"
      tabindex="-1"
      aria-labelledby="editHotSearchModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="editHotSearchModalLabel">
              编辑热搜词条
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form id="editHotSearchForm">
              <input type="hidden" id="editHotSearchId" />
              <div class="mb-3">
                <label for="editKeyword" class="form-label">关键词 *</label>
                <input
                  type="text"
                  class="form-control"
                  id="editKeyword"
                  required
                  placeholder="请输入热搜关键词"
                />
              </div>
              <div class="mb-3">
                <label for="editDescription" class="form-label">描述</label>
                <textarea
                  class="form-control"
                  id="editDescription"
                  rows="3"
                  placeholder="请输入热搜描述（可选）"
                ></textarea>
              </div>
              <div class="mb-3">
                <label for="editOrder" class="form-label">排序权重</label>
                <input
                  type="number"
                  class="form-control"
                  id="editOrder"
                  min="0"
                  placeholder="数字越大排序越靠前"
                />
              </div>
              <div class="mb-3">
                <div class="form-check">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    id="editIsActive"
                  />
                  <label class="form-check-label" for="editIsActive">
                    启用此热搜词条
                  </label>
                </div>
              </div>
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              取消
            </button>
            <button
              type="button"
              class="btn btn-primary"
              onclick="updateHotSearch()"
            >
              更新
            </button>
          </div>
        </div>
      </div>
    </div>

    <script src="admin.js"></script>
  </body>
</html>
